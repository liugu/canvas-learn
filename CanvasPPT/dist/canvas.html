<!doctype html><html><head><meta charset=UTF-8><title>HTML5 Canvas 应用 - By 刘固</title><link rel=stylesheet href=//cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css><link rel=stylesheet href=//cdn.staticfile.org/prism/1.15.0/themes/prism.min.css><link rel=stylesheet href=//cdn.staticfile.org/KaTeX/0.10.0-rc.1/katex.min.css><link href=./css/chunk-vendors.0e7dcb25.css rel=stylesheet></head><body><div><article id=webslides><section slide class="slide bg-gradient-r aligncenter"><div class=wrap wrap=true><h1 class="text-landing text-shadow">HTML5 Canvas 应用</h1><p class=text-intro>By 刘固</p><h2>目录</h2><ul><li>一、canvas简介</li><li>二、Canvas基本使用</li><li>三、绘制形状</li><li>四、绘制路径(path)</li><li>五、添加样式和颜色</li><li>六、绘制文本</li><li>七、绘制图片</li><li>八、状态的保存和恢复</li><li>九、变形</li><li>十一、裁剪路径</li><li>十二、动画</li><li>十三、Canvas的应用以及组件库</li></ul></div></section><section slide class="slide bg-gradient-r alignleft"><div class=wrap wrap=true><h2>一、canvas简介</h2><p>​ <code>&lt;canvas&gt;</code> 是 HTML5 新增的，一个可以使用脚本(通常为JavaScript)在其中绘制图像的 HTML 元素。它可以用来制作照片集或者制作简单(也不是那么简单)的动画，甚至可以进行实时视频处理和渲染。</p><p>​ 它最初由苹果内部使用自己MacOS X WebKit推出，供应用程序使用像仪表盘的构件和 Safari 浏览器使用。 后来，有人通过Gecko内核的浏览器 (尤其是Mozilla和Firefox)，Opera和Chrome和超文本网络应用技术工作组建议为下一代的网络技术使用该元素。</p><p>​ Canvas是由HTML代码配合高度和宽度属性而定义出的可绘制区域。JavaScript代码可以访问该区域，类似于其他通用的二维API，通过一套完整的绘图函数来动态生成图形。</p><p>​ Mozilla 程序从 Gecko 1.8 (Firefox 1.5)开始支持 <code>&lt;canvas&gt;</code>, Internet Explorer 从IE9开始<code>&lt;canvas&gt;</code> 。Chrome和Opera 9+ 也支持 <code>&lt;canvas&gt;</code>。</p></div></section><section slide class="slide bg-white alignleft"><div class=wrap wrap=true><h2>二、Canvas基本使用</h2><h3>2.1 <code>&lt;canvas&gt;</code>元素</h3><pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>tutorial<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>300<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>300<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">></span></span>
</code></pre><p><code>&lt;canvas&gt;</code>看起来和<code>&lt;img&gt;</code>标签一样，只是 <code>&lt;canvas&gt;</code> 只有两个可选的属性 width、heigth 属性，而没有 src、alt 属性。</p><p>​ 如果不给<code>&lt;canvas&gt;</code>设置widht、height属性时，则默认 width为300、height为150,单位都是px。也可以使用css属性来设置宽高，但是如宽高属性和初始比例不一致，他会出现扭曲。所以，建议永远不要使用css属性来设置<code>&lt;canvas&gt;</code>的宽高。</p><blockquote><p>替换内容</p></blockquote><p>​ 由于某些较老的浏览器（尤其是IE9之前的IE浏览器）或者浏览器不支持HTML元素<code>&lt;canvas&gt;</code>，在这些浏览器上你应该总是能展示替代内容。 ​ 支持<code>&lt;canvas&gt;</code>的浏览器会只渲染<code>&lt;canvas&gt;</code>标签，而忽略其中的替代内容。不支持 <code>&lt;canvas&gt;</code> 的浏览器则 会直接渲染替代内容。</p><blockquote><p>用文本替换：</p></blockquote><pre class=language-textile><code class=language-textile><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span><span class="token punctuation">></span></span>
    你的浏览器不支持canvas,请升级你的浏览器
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">></span></span>
</code></pre><blockquote><p>用 <code>&lt;img&gt;</code> 替换：</p></blockquote><pre class=language-textile><code class=language-textile><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./美女.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">></span></span>
</code></pre></div></section><section slide class="slide bg-white alignleft"><div class=wrap wrap=true><h3>2.2 渲染上下文(Thre Rending Context)</h3><p><code>&lt;canvas&gt;</code>会创建一个固定大小的画布，会公开一个或多个 渲染上下文(画笔)，使用 渲染上下文来绘制和处理要展示的内容。</p><p>​ 我们重点研究 2D 渲染上下文。 其他的上下文我们暂不研究，比如， WebGL使用了基于OpenGL ES的3D上下文 (“experimental-webgl”) 。</p><pre class=language-javascript><code class=language-javascript><span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tutorial'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获得 2d 上下文对象</span>
<span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3>2.3 检测支持性</h3><pre class=language-javascript><code class=language-javascript><span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tutorial'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 绘制图形代码</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// 提示浏览器不支持</span>
<span class="token punctuation">}</span>

</code></pre></div></section><section slide class="slide bg-white alignleft"><div class=wrap wrap=true><h3>2.4 代码模板</h3><pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Canvas tutorial<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
        <span class="token selector">canvas</span> <span class="token punctuation">{</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 1px solid black<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>tutorial<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>300<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>300<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tutorial'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      	<span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token comment">//开始代码</span>
        
    <span class="token punctuation">}</span>
    <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>

</code></pre><h3>2.5 一个简单的例子</h3><div class=content-left><blockquote><p>绘制两个长方形。</p></blockquote><pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Canvas tutorial<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
        <span class="token selector">canvas</span> <span class="token punctuation">{</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 1px solid black<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>tutorial<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>300<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>300<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tutorial'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"rgb(200,0,0)"</span><span class="token punctuation">;</span>
      	<span class="token comment">//绘制矩形</span>
        ctx<span class="token punctuation">.</span><span class="token function">fillRect</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"rgba(0, 0, 200, 0.5)"</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">fillRect</span> <span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>

</code></pre></div><div class=content-right><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAhIAAAGUCAYAAABgPMvnAAAH2UlEQVR4nO3dMY4bZRiA4ZndwcrCujJC2hwgXZq9zV4g58jRkgY6GrgASIgC0bjCW2CcdCnYhTfjnZ3oeSRXY/3/J9uyX3ssezyeDAAAwcXSAwAA6yUkAIBMSAAAmZAAADIhAQBkQgIAyIQEAJBNDx0cx/Gp5gBgAX5KiM/1YEh84EEG8GXyZpE5OLUBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkD36Xxv/1/7du2H//v3cy67at3d3w4tXr5YeAwBmN39InCLit7dv51521b65vRUSAHyRnNoAADIhAQBkQgIAyIQEAJAJCQAgExIAQCYkAIBMSAAAmZAAADIhAQBkQgIAyIQEAJAJCQAgExIAQCYkAIBMSAAAmZAAADIhAQBkQgIAyIQEAJAJCQAgExIAQCYkAIBsWnqA4vfh5uNlLf74eTNcb/dn3eP166+H3W6VdycAK7bKV54PEfHjcLv0GP/ZLz99Nbw4nDckbm42QgKAJ+fUBgCQCQkAIBMSAEAmJACATEgAAJmQAAAyIQEAZEICAMiEBACQCQkAIBMSAEAmJACATEgAAJmQAAAyIQEAZEICAMiEBACQCQkAIBMSAEAmJACATEgAAJmQAAAyIQEAZEICAMiEBACQCQkAIBMSAEAmJACATEgAAJmQAAAyIQEAZEICAMiEBACQCQkAIBMSAEA2zb3g5fX1sHn5cu5lPzEddsPl/fase8xpnGa/mQHgWZj9Fe67N2+G3d3d3Mt+4s8fDsOv3/911j3mdHF1tfQIAHAW838isd1+vJzTtNuf9tifdQ8A4HG+IwEAZEICAMiEBACQCQkAIBMSAEAmJACATEgAAJmQAAAyIQEAZEICAMiEBACQCQkAIBMSAEAmJACATEgAAJmQAAAyIQEAZEICAMiEBACQCQkAIBMSAEAmJACAbFp6gGKzGYft9nLpMZ6VaZX3JABrNx5P/vXgOA4PHF7M4XAc7u//XnqMZ+Xq6uIUE+PSYwAr8lyf41mXVYYEAJ/Pczxz8B0JACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBANj12hXEcn2IOAGCFHgyJ4/H4VHMAACvk1AYAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkAkJACATEgBAJiQAgExIAACZkAAAMiEBAGRCAgDIhAQAkP0Di0hMsSuzGrMAAAAASUVORK5CYII=" alt=简单例子></p></div></div></section><section slide class="slide bg-white alignleft"><div class=wrap wrap=true><h2>三、绘制形状</h2><h3>3.1 栅格 <code>(grid)</code> 和坐标空间</h3><p>如下图所示，<code>canvas</code> 元素默认被网格所覆盖。通常来说网格中的一个单元相当于<code>canvas</code> 元素中的一像素。栅格的起点为左上角（坐标为（0,0））。所有元素的位置都相对于原点来定位。所以图中蓝色方形左上角的坐标为距离左边（X轴）x像素，距离上边（Y轴）y像素（坐标为（x,y））。</p><p>​ 后面我们会涉及到坐标原点的平移、网格的旋转以及缩放等。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANwAAADcCAMAAAAshD+zAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAABgUExURQAAACYmJn5+fry8vOrq6kNDQ9zc3I6Ojm5ubp2dna2trVtbW87OzsjIyO/v7////zJfofb29v7+/uXl5ff39/39/fj4+Pz8/Pn5+fr6+szMzPv7+6enp+fn59DQ0PT09O486JcAAAQQSURBVHja7N2JjtowEAZgXzPkIi5H2wANvP9b1uFYtZtAE661p/8v8GqjCPxp7JhYK1Z5wVHAAQcccMABB5wAXON4v004e3bNNdyB2R0WCefgmA/DuIbbRfJpuRnEOV4ICLtBHDsJOMeDuP1BAu6wH8RtFyKyBS5ceoiolYqj+WJOQnFtB0uudCNx1oTGWKG4LDSZUNxCn58icXlpy1zsOmeTm3EjcOkscG0YWXY+CZfQAkfz9u86XMGtL2kpNNSuUwiTyf868C+cNaExNjQqWpS6dM3QehouC01mu1eIOsfOlnoabq3Pz/XQ5tjq9jE18rz7j/36s3KWZmYa7rjAxY27hHit20m4MOvs+j5cGC3vxBXmPIsm4D6mbey4fl6Je/ewBA444IADDjjggAMOOOCAux+36qe6fUyNPO/+Y6gccCPfmCvvaxsx7kc/43Gq9qZ8E+7HrbwA50vjNUvFsZqRl4rzpbJycTl5uThdyMVZ7eXiTCEY985PKMABBxxwwAH3JFyUeyio3L24uqi9raTOubKsdGK4pp8ruFqr/AuHZXMrD+P8TNdicYUqtVRcpaow7YY7844/j3pt5erjQyjui9e5J+KUGv3G3akJ4abn2/2Jv3Jp4SYOI+CAAw444IThpu95PIAbu4fyP1RuLheXG21CeCRu00+cuGPXLrjPXRaBuxbg4seZ7g7LCsVpJ7hyJHVYZkSkdWi2AnFbe47D1RK4qHCn3bbPs04ILrObLW0siV0KjN3IxGneOGKnReIKTcrkqpB5tXSWN+ywFAziotxDOY5JszFTblZ3/cRZua5nhdmdcJ+7LAF3NcDFj2NSnEnFkaUdSZ1zgbYzVm7lWDuhuC0pXeBqCVxcuIK63S+hOF10u19ilwKhwzIPn5l1KfSDc27OwV2BdNzPfuLE/bwV4E64KPdQUDnggAMOOOCAA24i7vXHgAMOOOCAexnuez9x4r7fCnD/Ae5V32ny0PehoHLAAQcccMABBxxwwAEHHHDAicAt+4kTt7wV4E64KPdQUDnggAMOOOCA+zfuV4x5Fm6ZXIADbmKsPf00MeCUepLugjKvHxBvx1Wq+sDlHAnu2b3ocGRF4Gx2nF35LIjCrzMqMxOKqMPLGjJfj3ssimtVLPWpVDnVrC+Vs7XmxHGmnGnK6TQCOtQfw5Js4rha6Up3hes0Zb5cZvHgwlxZcvFQ6ah7nHBWF7mKCNd1pXqodMWyzi+rNpu8W8S7peC8IrwT17vJoNpmPrWMxdny03+okYTzZe7l4owFDrjocCkGOOCAiwG330mw7faDOK4l4GoexLmVBNzKDeIadunbHDeDOH/gVZ30vNvVKz74YZxvHO+3CWfPrvHXcNICHHDAAQcccMAlmt8CDABIbErQtEaWvQAAAABJRU5ErkJggg==" alt=""></p><h3>3.2 绘制矩形</h3><p><code>&lt;canvas&gt;</code> 只支持一种原生的 图形绘制：矩形。所有其他图形都至少需要生成一种路径(path)。不过，我们拥有众多路径生成的方法让复杂图形的绘制成为了可能。</p><blockquote><p><code>canvas</code> 提供了三种方法绘制矩形：</p></blockquote><ol><li><p><code>fillRect(x, y, width, height)</code> 绘制一个填充矩形</p></li><li><p><code>strokeRect(x, y, width, height)</code> 绘制一个矩形的边框</p></li><li><p><code>clearRect(x, y, widh, height)</code> 清除指定的矩形区域，然后这块区域会变的完全透明。</p></li></ol><p>说明：</p><p>​ 这3个方法具有相同的参数。</p><p>​ <code>x</code>, <code>y</code>：指的是矩形的左上角的坐标。(相对于<code>canvas</code>的坐标原点)</p><p>​ <code>width</code>, <code>height</code>：指的是绘制的矩形的宽和高。</p><pre class=language-javascript><code class=language-javascript><span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tutorial'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//绘制矩形,填充的默认颜色为黑色</span>
    ctx<span class="token punctuation">.</span><span class="token function">strokeRect</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//绘制矩形边框</span>
    ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 清除指定的矩形区域</span>
    
<span class="token punctuation">}</span>
<span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p><img src=data:image/png;base64,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 alt=""></p></div></section><section slide class="slide bg-white alignleft"><div class=wrap wrap=true><h2>四、 绘制路径</h2><p>​ 图形的基本元素是路径。 ​ 路径是通过不同颜色和宽度的线段或曲线相连形成的不同形状的点的集合。 ​ 一个路径，甚至一个子路径，都是闭合的。</p><blockquote><p>使用路径绘制图形需要一些额外的步骤::</p></blockquote><ol><li>创建路径起始点</li><li>调用绘制方法去绘制出路径</li><li>把路径封闭</li><li>一旦路径生成，通过描边或填充路径区域来渲染图形。</li></ol><blockquote><p>下面是需要用到的方法：</p></blockquote><ol><li><p>beginPath() 新建一条路径，路径一旦创建成功，图形绘制命令被指向到路径上生成路径</p></li><li><p>moveTo(x, y) 把画笔移动到指定的坐标(x, y)。相当于设置路径的起始点坐标。</p></li><li><p>closePath() 闭合路径之后，图形绘制命令又重新指向到上下文中</p></li><li><p>stroke() 通过线条来绘制图形轮廓</p></li><li><p>fill() 通过填充路径的内容区域生成实心的图形</p></li></ol><h3>4.1 绘制线段</h3><pre class=language-javascript><code class=language-javascript><span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tutorial'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//新建一条path</span>
    ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//把画笔移动到指定的坐标</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//绘制一条从当前位置到指定坐标(200, 50)的直线.</span>
    <span class="token comment">//闭合路径。会拉一条从当前点到path起始点的直线。如果当前点与起始点重合，则什么都不做</span>
    ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//绘制路径。</span>
<span class="token punctuation">}</span>
<span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section><section slide class="slide bg-white alignleft"><div class=wrap wrap=true><h3>4.2 绘制三角形边框</h3><pre class=language-javascript><code class=language-javascript><span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tutorial'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  	ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//虽然我们只绘制了两条线段，但是closePath会closePath，仍然是一个3角形</span>
    ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//描边。stroke不会自动closePath()</span>
<span class="token punctuation">}</span>
<span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p><img src=./img/20099429.fd21d8ad.jpg alt=""></p><h3>4.3 绘制填充三角形</h3><pre class=language-javascript><code class=language-javascript><span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tutorial'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   
    ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//填充闭合区域。如果path没有闭合，则fill()会自动闭合路径。</span>
<span class="token punctuation">}</span>
<span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p><img src=./img/83072674.f85ef4a3.jpg alt=""></p><h2>4.4 绘制圆弧</h2><p><code>arc(x, y, r, startAngle, endAngle, anticlockwise)</code></p><p>以(x, y)为圆心，以r为半径，从 startAngle弧度开始到endAngle弧度结束。anticlosewise是布尔值，true表示逆时针，false表示顺时针。(默认是顺时针)</p><p>注意：</p><ol><li>这里的度数都是弧度。 <code>radians=(Math.PI/180)*degrees //角度转换成弧度</code></li></ol><p>案例：</p><pre class=language-javascript><code class=language-javascript><span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tutorial'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
<span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><p><img src=./img/62078705.b2377d12.jpg alt=""></p></div></section><section slide class="slide bg-white alignleft"><div class=wrap wrap=true><h2>五、添加样式和颜色</h2><p>​ 在前面的绘制矩形章节中，只用到了默认的线条和颜色。</p><p>​ 如果想要给图形上色，有两个重要的属性可以做到。</p><ol><li><code>fillStyle = color</code></li></ol><p>设置图形的填充颜色</p><ol start=2><li><code>strokeStyle = color</code></li></ol><p>设置图形轮廓的颜色</p><blockquote><p>备注：</p></blockquote><ol><li><code>color</code> 可以是表示 <code>css</code> 颜色值的字符串、渐变对象或者图案对象。</li><li>默认情况下，线条和填充颜色都是黑色。</li><li>一旦您设置了 <code>strokeStyle</code> 或者 <code>fillStyle</code> 的值，那么这个新值就会成为新绘制的图形的默认值。如果你要给每个图形上不同的颜色，你需要重新设置 <code>fillStyle</code> 或 <code>strokeStyle</code> 的值</li></ol><h3>5.1 fillStyle 给图形填充颜色</h3><pre class=language-javascript><code class=language-javascript><span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tutorial'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'rgb('</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">255</span> <span class="token operator">-</span> <span class="token number">42.5</span> <span class="token operator">*</span> i<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">','</span> <span class="token operator">+</span>
        Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">255</span> <span class="token operator">-</span> <span class="token number">42.5</span> <span class="token operator">*</span> j<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">',0)'</span><span class="token punctuation">;</span>
      ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span>j <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><p><img src=data:image/png;base64,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 alt=""></p></div></section><section slide class="slide bg-white alignleft"><div class=wrap wrap=true><h3>5.2 strokeStyle</h3><pre class=language-javascript><code class=language-javascript><span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tutorial'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">rgb(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">randomInt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">randomInt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">randomInt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">strokeRect</span><span class="token punctuation">(</span>j <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/**
 返回随机的 [from, to] 之间的整数(包括from，也包括to)
 */</span>
<span class="token keyword">function</span> <span class="token function">randomInt</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">from</span><span class="token punctuation">,</span> to</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>to <span class="token operator">-</span> <span class="token keyword">from</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">from</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><p><img src=./img/3288535670-5b74dd8ea12d9_articlex.189253df.png alt=""></p></div></section><section slide class="slide bg-white alignleft"><div class=wrap wrap=true><h3>5.3 Transparency(透明度)</h3><p>globalAlpha = transparencyValue</p><p>​ 这个属性影响到 canvas 里所有图形的透明度，有效的值范围是 0.0 （完全透明）到 1.0（完全不透明），默认是 1.0。</p><p>​ globalAlpha 属性在需要绘制大量拥有相同透明度的图形时候相当高效。不过，我认为使用rgba()设置透明度更加好一些。</p></div></section><section slide class="slide bg-white alignleft"><div class=wrap wrap=true><h3>5.4 line style</h3><h4>lineWidth = value</h4><p>线宽。只能是正值。默认是1.0。</p><p>起始点和终点的连线为中心，上下各占线宽的一半</p><pre class=language-javascript><code class=language-javascript>ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">160</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre><p><img src=./img/29873575.d16502a0.jpg alt=""></p></div></section><section slide class="slide bg-white alignleft"><div class=wrap wrap=true><h4>5.5 lineCap = type</h4><p>线条末端样式。</p><ol><li><p>butt：线段末端以方形结束</p></li><li><p>round：线段末端以圆形结束</p></li><li><p>square：线段末端以方形结束，但是增加了一个宽度和线段相同，高度是线段厚度一半的矩形区域。</p></li></ol><pre class=language-javascript><code class=language-javascript><span class="token keyword">var</span> lineCaps <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"butt"</span><span class="token punctuation">,</span> <span class="token string">"round"</span><span class="token punctuation">,</span> <span class="token string">"square"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">20</span> <span class="token operator">+</span> <span class="token number">30</span> <span class="token operator">*</span> i<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">20</span> <span class="token operator">+</span> <span class="token number">30</span> <span class="token operator">*</span> i<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>lineCap <span class="token operator">=</span> lineCaps<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>

ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">"red"</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><p><img src=./img/41486892.c4eb9a0d.jpg alt=""></p></div></section><section slide class="slide bg-white alignleft"><div class=wrap wrap=true><h4>5.6 lineJoin = type</h4><p>同一个path内，设定线条与线条间接合处的样式。</p><p>共有3个值round, bevel 和 miter：</p><ol><li>round</li></ol><p>通过填充一个额外的，圆心在相连部分末端的扇形，绘制拐角的形状。 圆角的半径是线段的宽度。</p><ol start=2><li>bevel</li></ol><p>在相连部分的末端填充一个额外的以三角形为底的区域， 每个部分都有各自独立的矩形拐角。</p><ol start=3><li>miter(默认)</li></ol><pre class=language-javascript><code class=language-javascript><span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tutorial'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> lineJoin <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'round'</span><span class="token punctuation">,</span> <span class="token string">'bevel'</span><span class="token punctuation">,</span> <span class="token string">'miter'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lineJoin<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span>lineJoin <span class="token operator">=</span> lineJoin<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span> <span class="token operator">+</span> i <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token operator">+</span> i <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">50</span> <span class="token operator">+</span> i <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token operator">+</span> i <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">250</span><span class="token punctuation">,</span> <span class="token number">50</span> <span class="token operator">+</span> i <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
<span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><p><img src=./img/5058353.6c8852fb.jpg alt=""></p><h4>5.7 虚线</h4><p>用 <code>setLineDash</code> 方法和 <code>lineDashOffset</code> 属性来制定虚线样式. <code>setLineDash</code> 方法接受一个数组，来指定线段与间隙的交替；<code>lineDashOffset</code> 属性设置起始偏移量。</p><pre class=language-javascript><code class=language-javascript><span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tutorial'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    ctx<span class="token punctuation">.</span><span class="token function">setLineDash</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [实线长度, 间隙长度]</span>
    ctx<span class="token punctuation">.</span>lineDashOffset <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">strokeRect</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">210</span><span class="token punctuation">,</span> <span class="token number">210</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div></section><section slide class="slide bg-white alignleft"><div class=wrap wrap=true><h2>六、绘制文本</h2><p>绘制文本的两个方法</p><ol><li><p>fillText(text, x, y [, maxWidth]) 在指定的 (x,y) 位置填充指定的文本，绘制的最大宽度是可选的。</p></li><li><p>strokeText(text, x, y [, maxWidth]) 在指定的 (x,y) 位置绘制文本边框，绘制的最大宽度是可选的。</p></li></ol><pre class=language-javascript><code class=language-javascript><span class="token keyword">var</span> ctx<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tutorial'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">"100px sans-serif"</span>
    ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span><span class="token string">"天若有情"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">strokeText</span><span class="token punctuation">(</span><span class="token string">"天若有情"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p><img src=./img/87968030.44aef1f8.jpg alt=""></p><p>给文本添加样式</p><ol><li><p>font = value 当前我们用来绘制文本的样式。这个字符串使用和 CSS font 属性相同的语法。 默认的字体是 10px sans-serif。</p></li><li><p>textAlign = value 文本对齐选项。 可选的值包括：start, end, left, right or center。 默认值是 start。</p></li><li><p>textBaseline = value 基线对齐选项，可选的值包括：top, hanging, middle, alphabetic, ideographic, bottom。默认值是 alphabetic。。</p></li><li><p>direction = value 文本方向。可能的值包括：ltr, rtl, inherit。默认值是 inherit。</p></li></ol></div></section><section slide class="slide bg-white alignleft"><div class=wrap wrap=true><h2>七、绘制图片</h2><h3>7.1 由零开始创建图片</h3><pre class=language-javascript><code class=language-javascript><span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 创建一个&lt;img>元素</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'myImage.png'</span><span class="token punctuation">;</span> <span class="token comment">// 设置图片源地址</span>

</code></pre><p>脚本执行后图片开始装载。</p><p>绘制img</p><pre class=language-javascript><code class=language-javascript><span class="token comment">// 参数 1：要绘制的 img  </span>
<span class="token comment">// 参数 2、3：绘制的 img 在 canvas 中的坐标</span>
ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

</code></pre><p><strong>注意：</strong> 考虑到图片是从网络加载，如果 drawImage 的时候图片还没有完全加载完成，则什么都不做，个别浏览器会抛异常。所以我们应该保证在 img 绘制完成之后再 drawImage。</p><pre class=language-javascript><code class=language-javascript><span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 创建img元素</span>
img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'myImage.png'</span><span class="token punctuation">;</span> <span class="token comment">// 设置图片源地址</span>
</code></pre><h3>绘制 img 标签元素中的图片</h3><pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./public/images/cat.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>300<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>tutorial<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>600<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>400<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">></span></span>
</code></pre><pre class=language-javascript><code class=language-javascript><span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tutorial'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>第一张图片就是页面中的 <img> 标签：</p><p><img src=./img/cat.aad7b4b7.png alt=""></p><h3>7.3 缩放图片</h3><p>drawImage() 也可以再添加两个参数：</p><p><code>drawImage(image, x, y, width, height)</code></p><p>​这个方法多了 2 个参数：width 和 height，这两个参数用来控制 当像 canvas 画入时应该缩放的大小。</p><p><code>ctx.drawImage(img, 0, 0, 400, 200)</code></p><h3>7.4 切片(slice)</h3><p><code>drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight)</code></p><p>第一个参数和其它的是相同的，都是一个图像或者另一个 canvas 的引用。</p><p>其他 8 个参数：</p><p>前 4 个是定义图像源的切片位置和大小，后 4 个则是定义切片的目标显示位置和大小。</p><p><img src=./img/2106688680-54566fa3d81dc_articlex.4f0d8c14.jpeg alt=""></p></div></section><section slide class="slide bg-white alignleft"><div class=wrap wrap=true><h2>八、状态的保存和恢复</h2><p>Saving and restoring state 是绘制复杂图形时必不可少的操作。</p><p>save() 和 restore()</p><p>save 和 restore 方法是用来保存和恢复 canvas 状态的，都没有参数。</p><p>​Canvas 的状态就是当前画面应用的所有样式和变形的一个快照。</p><ol><li>关于 save() ：Canvas状态存储在栈中，每当save()方法被调用后，当前的状态就被推送到栈中保存。</li></ol><p>一个绘画状态包括：</p><ul><li>当前应用的变形（即移动，旋转和缩放）</li><li>strokeStyle, fillStyle, globalAlpha, lineWidth, lineCap, lineJoin, miterLimit, shadowOffsetX, shadowOffsetY, shadowBlur, shadowColor, globalCompositeOperation 的值</li><li>当前的裁切路径（clipping path）</li></ul><p>​ <strong>可以调用任意多次 save方法(类似数组的 push())。</strong></p><ol start=2><li>关于restore()：每一次调用 restore 方法，上一个保存的状态就从栈中弹出，所有设定都恢复(类似数组的 pop())。</li></ol><pre class=language-javascript><code class=language-javascript>
<span class="token keyword">var</span> ctx<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tutorial'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 使用默认设置绘制一个矩形</span>
    ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment">// 保存默认状态</span>
 
    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'red'</span>       <span class="token comment">// 在原有配置基础上对颜色做改变</span>
    ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用新的设置绘制一个矩形</span>
 
    ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment">// 保存当前状态</span>
    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'#FFF'</span>       <span class="token comment">// 再次改变颜色配置</span>
    ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 使用新的配置绘制一个矩形</span>
 
    ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// 重新加载之前的颜色状态</span>
    ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 使用上一次的配置绘制一个矩形</span>
 
    ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// 加载默认颜色配置</span>
    ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 使用加载的配置绘制一个矩形</span>
<span class="token punctuation">}</span>
<span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section><section slide class="slide bg-white alignleft"><div class=wrap wrap=true><h2>九、变形</h2><h3>9.1 translate</h3><p><code>translate(x, y)</code></p><p>用来移动 canvas 的原点到指定的位置</p><p>​translate 方法接受两个参数。x 是左右偏移量，y 是上下偏移量，如右图所示。</p><p>在做变形之前先保存状态是一个良好的习惯。大多数情况下，调用 restore 方法比手动恢复原先的状态要简单得多。又如果你是在一个循环中做位移但没有保存和恢复 canvas 的状态，很可能到最后会发现怎么有些东西不见了，那是因为它很可能已经超出 canvas 范围以外了。</p><p>​ 注意：translate 移动的是 canvas 的坐标原点(坐标变换)。</p><p><img src=data:image/png;base64,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 alt=""></p><pre class=language-javascript><code class=language-javascript>
<span class="token keyword">var</span> ctx<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tutorial1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//保存坐原点平移之前的状态</span>
    ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">strokeRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//恢复到最初状态</span>
    ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">220</span><span class="token punctuation">,</span> <span class="token number">220</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><p><img src="data:image/png;base64,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" alt=""></p><h3>9.2 rotate</h3><p><code>rotate(angle)</code></p><p>旋转坐标轴</p><p>这个方法只接受一个参数：旋转的角度(angle)，它是顺时针方向的，以弧度为单位的值。</p><p>​ 旋转的中心是坐标原点。 <img src=./img/3322150878-5b74dd8e2b6a4_articlex.1609ec90.png alt=""></p><pre class=language-javascript><code class=language-javascript><span class="token keyword">var</span> ctx<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tutorial1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"red"</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
  ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span> <span class="token operator">*</span> <span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"blue"</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
  ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
  ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p><img src=./img/1819968878-5b74dd8e1e770_articlex.281e781f.png alt=""></p><h3>9.3 scale (缩放)</h3><p><code>scala(x,y)</code></p><p>我们用它来增减图形在 canvas 中的像素数目，对形状，位图进行缩小或者放大。</p><p>scale方法接受两个参数。x,y 分别是横轴和纵轴的缩放因子，它们都必须是正值。值比 1.0 小表示缩 小，比 1.0 大则表示放大，值为 1.0 时什么效果都没有。</p><p>​ 默认情况下，canvas 的 1 单位就是 1 个像素。举例说，如果我们设置缩放因子是 0.5，1 个单位就变成对应 0.5 个像素，这样绘制出来的形状就会是原先的一半。同理，设置为 2.0 时，1 个单位就对应变成了 2 像素，绘制的结果就是图形放大了 2 倍。</p><h3>9.4 transform (变形矩阵)</h3><p><code>transform(a, b, c, d, e, f)</code></p><p><img src="data:image/jpeg;base64,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" alt=""></p><ol><li>a:: Horizontal scaling.(水平伸缩)</li><li>b:: Horizontal skewing.(水平倾斜)</li><li>c:: Vertical skewing.(垂直偏移)</li><li>d:: Vertical scaling. (垂直倾斜</li><li>e:: Horizontal moving. (水平移动)</li><li>f:: Vertical moving. （垂直移动）</li></ol><pre class=language-javascript><code class=language-javascript><span class="token keyword">var</span> ctx<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tutorial1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">transform</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p><img src=data:image/png;base64,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 alt=""></p></div></section><section slide class="slide bg-white alignleft"><div class=wrap wrap=true><h2>十、合成</h2><p>在前面的所有例子中、，我们总是将一个图形画在另一个之上，对于其他更多的情况，仅仅这样是远远不够的。比如，对合成的图形来说，绘制顺序会有限制。不过，我们可以利用 globalCompositeOperation 属性来改变这种状况。</p><p><code>globalCompositeOperation = type</code></p><pre class=language-javascript><code class=language-javascript><span class="token keyword">var</span> ctx<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tutorial1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"blue"</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    ctx<span class="token punctuation">.</span>globalCompositeOperation <span class="token operator">=</span> <span class="token string">"source-over"</span><span class="token punctuation">;</span> <span class="token comment">//全局合成操作</span>
    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"red"</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><p>**注：**下面的展示中，蓝色是原有的，红色是新的。</p><p>type 是下面 13 种字符串值之一：</p><ol><li><p>这是默认设置，新图像会覆盖在原有图像。 <img src=./img/1858023544-5b74dd8e0813d.b17e2c88.png alt=""></p></li><li><p>source-in</p></li></ol><p>仅仅会出现新图像与原来图像重叠的部分，其他区域都变成透明的。(包括其他的老图像区域也会透明)</p><p><img src=data:image/png;base64,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 alt=""></p><ol start=3><li>source-out</li></ol><p>仅仅显示新图像与老图像没有重叠的部分，其余部分全部透明。(老图像也不显示)</p><p><img src="data:image/png;base64,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" alt=""></p><ol start=4><li>source-atop 新图像仅仅显示与老图像重叠区域。老图像仍然可以显示。</li></ol><p><img src="data:image/png;base64,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" alt=""></p><ol start=5><li>destination-over</li></ol><p>新图像会在老图像的下面。</p><p><img src="data:image/png;base64,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" alt=""></p><ol start=6><li>destination-in 仅仅新老图像重叠部分的老图像被显示，其他区域全部透明。</li></ol><p><img src=data:image/png;base64,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 alt=""></p><ol start=7><li>destination-out</li></ol><p>仅仅老图像与新图像没有重叠的部分。 注意显示的是老图像的部分区域。</p><p><img src=data:image/png;base64,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 alt=""></p><ol start=8><li>destination-atop 老图像仅仅仅仅显示重叠部分，新图像会显示在老图像的下面。</li></ol><p><img src="data:image/png;base64,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" alt=""></p><ol start=9><li>lighter 新老图像都显示，但是重叠区域的颜色做加处理。</li></ol><p><img src=data:image/png;base64,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 alt=""></p><ol start=10><li>darken 保留重叠部分最黑的像素。(每个颜色位进行比较，得到最小的)</li></ol><p><img src="data:image/png;base64,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" alt=""></p><ol start=11><li>lighten 保证重叠部分最量的像素。(每个颜色位进行比较，得到最大的)</li></ol><pre class=language-textile><code class=language-textile><span class="token phrase">blue: #0000ff
red: #ff0000
</span></code></pre><p><img src="data:image/png;base64,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" alt=""></p><ol start=12><li>xor</li></ol><p>重叠部分会变成透明。</p><p><img src=data:image/png;base64,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 alt=""></p><ol start=13><li>copy</li></ol><p>只有新图像会被保留，其余的全部被清除(边透明)。</p><p><img src=data:image/png;base64,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 alt=""></p></div></section><section slide class="slide bg-white alignleft"><div class=wrap wrap=true><h2>十一、裁剪路径</h2><p><code>clip()</code></p><p>把已经创建的路径转换成裁剪路径。</p><p>​ 裁剪路径的作用是遮罩。只显示裁剪路径内的区域，裁剪路径外的区域会被隐藏。（在canvas画布上，设置可绘制的区域）</p><ul><li>默认情况下，canvas 有一个与它自身一样大的裁切路径（也就是没有裁切效果）.</li><li>裁切路径和普通的 canvas 图形差不多，不同的是它的作用是遮罩，用来隐藏不需要的部分</li><li>最重要的区别是裁切路径不会在 canvas 上绘制东西，而且它永远不受新图形的影响</li></ul><p>​ <strong>注意</strong>：clip() 只能遮罩在这个方法调用之后绘制的图像，如果是 clip() 方法调用之前绘制的图像，则无法实现遮罩。</p><pre class=language-javascript><code class=language-javascript>
<span class="token keyword">var</span> ctx<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'demo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">clip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token comment">// ctx.stroke();</span>

    <span class="token comment">// 一个正方形,裁剪后</span>
    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"pink"</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><p><img src="data:image/png;base64,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" alt=""></p></div></section><section slide class="slide bg-white alignleft"><div class=wrap wrap=true><h2>十二、动画</h2><h3>动画的基本步骤</h3><ol><li><p><strong>清空</strong> canvas 再绘制每一帧动画之前，需要清空所有。清空所有最简单的做法就是 clearRect() 方法。</p></li><li><p><strong>保存</strong> canvas 状态 如果在绘制的过程中会更改 canvas 的状态(颜色、移动了坐标原点等),又在绘制每一帧时都是原始状态的话，则最好保存下 canvas 的状态</p></li><li><p><strong>绘制动画图形</strong>这一步才是真正的绘制动画帧</p></li><li><p><strong>恢复</strong> canvas 状态如果你前面保存了 canvas 状态，则应该在绘制完成一帧之后恢复 canvas 状态。</p></li></ol><h3>控制动画</h3><p>我们可用通过 canvas 的方法或者自定义的方法把图像会知道到 canvas 上。正常情况，我们能看到绘制的结果是在脚本执行结束之后。例如，我们不可能在一个 for 循环内部完成动画。</p><p>也就是，为了执行动画，我们需要一些可以定时执行重绘的方法。</p><p>一般用到下面三个方法：</p><ol><li>setInterval()</li><li>setTimeout()</li><li>requestAnimationFrame()</li></ol><p>通常我们使用 requestAnimationFrame ，它有三个优势：</p><p><strong>CPU节能</strong>：使用setTimeout实现的动画，当页面被隐藏或最小化时，setTimeout 仍然在后台执行动画任务，由于此时页面处于不可见或不可用状态，刷新动画是没有意义的，完全是浪费CPU资源。而requestAnimationFrame则完全不同，当页面处理未激活的状态下，该页面的屏幕刷新任务也会被系统暂停，因此跟着系统步伐走的requestAnimationFrame也会停止渲染，当页面被激活时，动画就从上次停留的地方继续执行，有效节省了CPU开销。</p><p>**函数节流：**在高频率事件(resize,scroll等)中，为了防止在一个刷新间隔内发生多次函数执行，使用requestAnimationFrame可保证每个刷新间隔内，函数只被执行一次，这样既能保证流畅性，也能更好的节省函数执行的开销。</p><p><strong>优雅降级</strong>：由于兼容性问题，需要降级对接口进行封装，优先使用高级特性，再根据浏览器不同情况进行回退，直到只能使用settimeout。参考[GitHub](https:://github.com/darius/requestAnimationFrame）</p></div></section><section slide class="slide bg-white aligncenter"><div class=wrap wrap=true><h3>案例1 ：太阳系</h3><p><img src=./img/796853783-5b74dd8f41e21_articlex.87bbce96.gif alt=""></p><pre class=language-javascript><code class=language-javascript><span class="token keyword">let</span> sun<span class="token punctuation">;</span>
<span class="token keyword">let</span> earth<span class="token punctuation">;</span>
<span class="token keyword">let</span> moon<span class="token punctuation">;</span>
<span class="token keyword">let</span> ctx<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    sun <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    earth <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    moon <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sun<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">"sun.png"</span><span class="token punctuation">;</span>
    earth<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">"earth.png"</span><span class="token punctuation">;</span>
    moon<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">"moon.png"</span><span class="token punctuation">;</span>
 
    <span class="token keyword">let</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#solar"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    sun<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
 
<span class="token punctuation">}</span>
<span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//清空所有的内容</span>
    <span class="token comment">/*绘制 太阳*/</span>
    ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>sun<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token comment">//绘制earth轨道</span>
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">"rgba(255,255,0,0.5)"</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 
    <span class="token keyword">let</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//绘制地球</span>
    ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">*</span> time<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">60000</span> <span class="token operator">*</span> time<span class="token punctuation">.</span><span class="token function">getMilliseconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>earth<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">)</span>
 
    <span class="token comment">//绘制月球轨道</span>
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">"rgba(255,255,255,.3)"</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token comment">//绘制月球</span>
    ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">6</span> <span class="token operator">*</span> time<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">6000</span> <span class="token operator">*</span> time<span class="token punctuation">.</span><span class="token function">getMilliseconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>moon<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3.5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>draw<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></section><section slide class="slide bg-white aligncenter"><div class=wrap wrap=true><h3>案例2：模拟时钟</h3><div class="content-left width300"><p><img src=./img/clock.006fa355.png alt="" class=content-left></p></div><div class=content-right><pre class=language-html><code class=language-html><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>时钟<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>clock<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">></span></span>


    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
        <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#clock"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">draw</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">drawDial</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//绘制表盘</span>
                <span class="token function">drawAllHands</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//绘制时分秒针</span>
                <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">/*绘制时分秒针*/</span>
        <span class="token keyword">function</span> <span class="token function">drawAllHands</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">let</span> s <span class="token operator">=</span> time<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> m <span class="token operator">=</span> time<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> h <span class="token operator">=</span> time<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">let</span> pi <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> secondAngle <span class="token operator">=</span> pi <span class="token operator">/</span> <span class="token number">180</span> <span class="token operator">*</span> <span class="token number">6</span> <span class="token operator">*</span> s<span class="token punctuation">;</span> <span class="token comment">//计算出来s针的弧度</span>
            <span class="token keyword">let</span> minuteAngle <span class="token operator">=</span> pi <span class="token operator">/</span> <span class="token number">180</span> <span class="token operator">*</span> <span class="token number">6</span> <span class="token operator">*</span> m <span class="token operator">+</span> secondAngle <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">;</span> <span class="token comment">//计算出来分针的弧度</span>
            <span class="token keyword">let</span> hourAngle <span class="token operator">=</span> pi <span class="token operator">/</span> <span class="token number">180</span> <span class="token operator">*</span> <span class="token number">30</span> <span class="token operator">*</span> h <span class="token operator">+</span> minuteAngle <span class="token operator">/</span> <span class="token number">12</span><span class="token punctuation">;</span> <span class="token comment">//计算出来时针的弧度</span>

            <span class="token function">drawHand</span><span class="token punctuation">(</span>hourAngle<span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">"black"</span><span class="token punctuation">,</span> ctx<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//绘制时针</span>
            <span class="token function">drawHand</span><span class="token punctuation">(</span>minuteAngle<span class="token punctuation">,</span> <span class="token number">106</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">"#38f"</span><span class="token punctuation">,</span> ctx<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//绘制分针</span>
            <span class="token function">drawHand</span><span class="token punctuation">(</span>secondAngle<span class="token punctuation">,</span> <span class="token number">129</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"red"</span><span class="token punctuation">,</span> ctx<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//绘制秒针</span>
        <span class="token punctuation">}</span>
        <span class="token comment">/*绘制时针、或分针、或秒针
         * 参数1：要绘制的针的角度
         * 参数2：要绘制的针的长度
         * 参数3：要绘制的针的宽度
         * 参数4：要绘制的针的颜色
         * 参数4：ctx
         * */</span>
        <span class="token keyword">function</span> <span class="token function">drawHand</span><span class="token punctuation">(</span><span class="token parameter">angle<span class="token punctuation">,</span> len<span class="token punctuation">,</span> width<span class="token punctuation">,</span> color<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//把坐标轴的远点平移到原来的中心</span>
            ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> angle<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//旋转坐标轴。 x轴就是针的角度</span>
            ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>len<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 沿着x轴绘制针</span>
            ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> width<span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> color<span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span>lineCap <span class="token operator">=</span> <span class="token string">"round"</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">/*绘制表盘*/</span>
        <span class="token keyword">function</span> <span class="token function">drawDial</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> pi <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">;</span>

            ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//清除所有内容</span>
            ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//一定坐标原点到原来的中心</span>
            ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">140</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> pi<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//绘制圆周</span>
            ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">60</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//绘制刻度。</span>
                ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token operator">-</span>pi <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> i <span class="token operator">*</span> pi <span class="token operator">/</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//旋转坐标轴。坐标轴x的正方形从 向上开始算起</span>
                ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                
                <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                    ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">130</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> i <span class="token operator">%</span> <span class="token number">5</span> <span class="token operator">?</span> <span class="token number">2</span> <span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">;</span>
                ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> i <span class="token operator">%</span> <span class="token number">5</span> <span class="token operator">?</span> <span class="token string">"#ccc"</span> <span class="token punctuation">:</span> <span class="token string">"#222"</span><span class="token punctuation">;</span>
                ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>
</code></pre></div></div></section><section slide class="slide bg-white alignleft"><div class=wrap wrap=true><h2>十三、Canvas的应用以及组件库</h2><ol><li><p>Echarts ECharts是百度开源的纯 Javascript 图表库，目前开源可以与highcharts相匹敌的一个图表库.支持折线图（区域图）、柱状图（条状图）、散点图（气泡图）、K线图、饼图（环形图）、雷达图（填充雷达图）、和弦图、力导向布局图、地图、仪表盘、漏斗图、事件河流图等12类图表，同时提供标题，详情气泡、图例、值域、数据区域、时间轴、工具箱等7个可交互组件，支持多图表、组件的联动和混搭展现。</p></li><li><p>AntV [ G2 G6 F2 L7 ] AntV 是蚂蚁金服全新一代数据可视化解决方案，致力于提供一套简单 方便、专业可靠、无限可能的数据可视化最佳实践。 <a href=https://antv.alipay.com/zh-cn/index.html#__products target=_blank>AntV官网</a></p></li><li><p>fabric.js 一个 Javascript Canvas库</p></li></ol><blockquote><p>注：目前实现图表功能 可以选择Canvas 或者 SVG , Echarts 和 G2 都封装好了，可以自定义配置使用 Canvas 渲染还是SVG 渲染</p></blockquote><p>Canvas与SVG 比较</p><p>Canvas</p><ul><li>依赖分辨率</li><li>不支持事件处理器</li><li>弱的文本渲染能力</li><li>能够以 .png 或 .jpg 格式保存结果图像</li><li>最适合图像密集型的游戏和应用，其中的许多对象会被频繁重绘</li></ul><p>SVG</p><ul><li>不依赖分辨率</li><li>支持事件处理器</li><li>最适合带有大型渲染区域的应用程序（比如谷歌地图）</li><li>复杂度高会减慢渲染速度（任何过度使用 DOM 的应用都不快）</li><li>不适合游戏应用</li></ul></div></section><section slide class="slide bg-white aligncenter"><div class=wrap wrap=true><h2>Thanks</h2></div></section></article></div><script>window.pluginsOptions = {}



document.addEventListener('DOMContentLoaded', () => {
    let isPrintMode = false;
    if(~location.search.indexOf('print-pdf')){
        isPrintMode = true;
        WebSlides.registerPlugin('scroll', function(){});
    }
    const ws = new WebSlides({
        loop: false
    })
    window.wsInstance = ws;
    if(isPrintMode){
        ws.slides.forEach(s=>s.show())
    }
}, false)</script><script src=./js/chunk-vendors.601c1949.js></script><script src=./js/canvas.190c2c82.js></script></body></html>